{
  "version": 3,
  "sources": ["../../../../../../node_modules/vitepress-plugin-tabs/src/client/index.ts", "../../../../../../node_modules/vitepress-plugin-tabs/src/client/useTabsSelectedState.ts"],
  "sourcesContent": ["import type { App } from 'vue'\nimport PluginTabs from './PluginTabs.vue'\nimport PluginTabsTab from './PluginTabsTab.vue'\nimport { provideTabsSharedState } from './useTabsSelectedState'\n\nexport const enhanceAppWithTabs = (app: App) => {\n  provideTabsSharedState(app)\n  app.component('PluginTabs', PluginTabs)\n  app.component('PluginTabsTab', PluginTabsTab)\n}\n", "import { ref, computed, reactive, inject, watch } from 'vue'\nimport type { App, Ref, InjectionKey } from 'vue'\n\ntype TabsSharedState = Record<string, string>\n\nconst injectionKey: InjectionKey<TabsSharedState> =\n  'vitepress:tabSharedState' as unknown as symbol\nconst ls = typeof localStorage !== 'undefined' ? localStorage : null\nconst localStorageKey = 'vitepress:tabsSharedState'\n\nconst getLocalStorageValue = (): TabsSharedState => {\n  const rawValue = ls?.getItem(localStorageKey)\n  if (rawValue) {\n    try {\n      return JSON.parse(rawValue)\n    } catch {}\n  }\n  return {}\n}\nconst setLocalStorageValue = (v: TabsSharedState) => {\n  if (!ls) return\n  ls.setItem(localStorageKey, JSON.stringify(v))\n}\n\nexport const provideTabsSharedState = (app: App) => {\n  const state = reactive(getLocalStorageValue())\n  watch(state, newState => {\n    setLocalStorageValue(newState)\n  })\n\n  app.provide(injectionKey, state)\n}\n\nexport const useTabsSelectedState = <T extends string>(\n  acceptValues: Ref<T[]>,\n  sharedStateKey: Ref<string | undefined>\n) => {\n  const sharedState = inject(injectionKey)\n  if (!sharedState) {\n    throw new Error(\n      '[vitepress-plugin-tabs] TabsSharedState should be injected'\n    )\n  }\n\n  const nonSharedState = ref<T | undefined>()\n\n  const selected = computed({\n    get() {\n      const key = sharedStateKey.value\n      const acceptVals = acceptValues.value\n      if (key) {\n        const value = sharedState[key]\n        if (value && (acceptVals as string[]).includes(value)) {\n          return value as T\n        }\n      } else {\n        const nonSharedStateVal = nonSharedState.value\n        if (nonSharedStateVal) {\n          return nonSharedStateVal\n        }\n      }\n      return acceptVals[0]\n    },\n    set(v) {\n      const key = sharedStateKey.value\n      if (key) {\n        sharedState[key] = v\n      } else {\n        nonSharedState.value = v\n      }\n    }\n  })\n  const select = (newValue: T) => {\n    selected.value = newValue\n  }\n\n  return { selected, select }\n}\n"],
  "mappings": ";;;;;;AACA,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;;;ACG1B,IAAM,eACJ;AACF,IAAM,KAAK,OAAO,iBAAiB,cAAc,eAAe;AAChE,IAAM,kBAAkB;AAExB,IAAM,uBAAuB,MAAuB;AAClD,QAAM,WAAW,yBAAI,QAAQ;AAC7B,MAAI,UAAU;AACZ,QAAI;AACF,aAAO,KAAK,MAAM,QAAQ;AAAA,IAC5B,QAAQ;AAAA,IAAC;AAAA,EACX;AACA,SAAO,CAAC;AACV;AACA,IAAM,uBAAuB,CAAC,MAAuB;AACnD,MAAI,CAAC;AAAI;AACT,KAAG,QAAQ,iBAAiB,KAAK,UAAU,CAAC,CAAC;AAC/C;AAEO,IAAM,yBAAyB,CAAC,QAAa;AAClD,QAAM,QAAQ,SAAS,qBAAqB,CAAC;AAC7C,QAAM,OAAO,cAAY;AACvB,yBAAqB,QAAQ;AAAA,EAC/B,CAAC;AAED,MAAI,QAAQ,cAAc,KAAK;AACjC;;;AD1BO,IAAM,qBAAqB,CAAC,QAAa;AAC9C,yBAAuB,GAAG;AAC1B,MAAI,UAAU,cAAc,UAAU;AACtC,MAAI,UAAU,iBAAiB,aAAa;AAC9C;",
  "names": []
}
